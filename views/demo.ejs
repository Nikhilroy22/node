<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Splash Screen Loading</title>
<style>
  body, html { margin:0; padding:0; height:100%; }
  .splash-screen {
    position: fixed; top:0; left:0;
    width:100%; height:100%;
    background:#073615;
    display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    color:#fff;
    font-family:sans-serif;
  }

  .loader-bar {
    width: 300px;
    height: 20px;
    border:1px solid #fff;
    border-radius: 10px;
    margin-top: 20px;
    overflow:hidden;
  }

  .loader-fill {
    height:100%;
    width:0;
    background:linear-gradient(90deg,#2a8f43,#1f7a34);
    transition: width 0.2s ease;
  }

  .hidden { display:none; }
</style>
</head>
<body>

<div id="splash" class="splash-screen">
    <h1>Casino Game</h1>
    <div class="loader-bar">
        <div id="loaderFill" class="loader-fill"></div>
    </div>
    <p id="progressText">0%</p>
</div>

<div id="mainContent" class="hidden">
    <h2>Welcome to the Game!</h2>
</div>

<script>
const loaderFill = document.getElementById('loaderFill');
const progressText = document.getElementById('progressText');
const splash = document.getElementById('splash');
const mainContent = document.getElementById('mainContent');

const evtSource = new EventSource('/ping');

evtSource.onmessage = function(e) {
    const progress = parseInt(e.data);
    loaderFill.style.width = progress + '%';
    progressText.textContent = progress + '%';

    if(progress >= 100) {
        splash.classList.add('hidden');
        mainContent.classList.remove('hidden');
        evtSource.close();
    }
}

evtSource.onerror = function() {
    progressText.textContent = "Network Error!";
}
</script>

</body>
</html>