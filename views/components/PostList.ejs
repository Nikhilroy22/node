<style>
  
  .ploader{
  text-align:center;
  padding:20px;
  color:#555;
}

.post-item{
  padding:15px;
  border-bottom:1px solid #ddd;
}
</style>

<div id="postlist"></div>

<div id="loader" class="ploader">
  Loading...
</div>
<button onclick="lldd()">load more</button>

<script>


  const postlist = document.getElementById("postlist");
  const loader = document.getElementById("loader");

  let page = 1;
  let isLoading = false;
  let hasMore = true;

  async function loadPosts() {
    if (isLoading || !hasMore) return;

    isLoading = true;
    loader.style.display = "block";

    try {
      const res = await fetch(`/admin/data?page=${page}`);
      const posts = await res.json();

      if (!posts.length) {
        hasMore = false;
        loader.innerText = "আর কোনো পোস্ট নেই";
        return;
      }

      posts.forEach(post => {
        const div = document.createElement("div");
        div.className = "post-item";
        div.innerHTML = `
          <h3>
            <a href="/post/${post.id}">
              ${post.title}
            </a>
          </h3>
          <p>${post.content.slice(0,120)}...</p>
        `;
        postlist.appendChild(div);
      });

      page++;

    } catch (e) {
      console.error(e);
    } finally {
      isLoading = false;
      if (hasMore) loader.style.display = "none";
    }
  }

  function lldd(){
    
  loadPosts();
    
  }

  // initial load
  loadPosts();


</script>