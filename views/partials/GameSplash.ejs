<style>
 
  .splash-screengg {
    position: fixed; top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.8);
    display:flex; flex-direction:column;
    align-items:center; justify-content:center;
    color:#fff;
    font-family:sans-serif;
    z-index:999;
  }

  .loader-bar {
    width: 300px;
    height: 20px;
    border:1px solid #fff;
    border-radius: 10px;
    margin-top: 20px;
    overflow:hidden;
  }

  .loader-fill {
    height:100%;
    width:0;
    background:linear-gradient(90deg,#2a8f43,#1f7a34);
    transition: width 0.2s ease;
  }

  .hidden { display:none; }
</style>

<div id="networkStatus" style="position:fixed;top:50px;right:10px;padding:8px 12px;border-radius:6px;background:#333;color:#fff;font-weight:bold;z-index:9999;">Checking...</div>
<script>
  const statusDiv = document.getElementById("networkStatus");
  function updateNetworkStatus() {
    const conn = navigator.connection || navigator.mozConnection || navigator.webkitConnection;

    if (!conn) return;

    let speed = conn.downlink;     // Mbps
    let type = conn.effectiveType; // '4g', '3g', '2g', 'slow-2g'

    if (type === "4g") show("Network: Good", "green");
    else if (type === "3g") show("Network: Medium", "orange");
    else if (type === "2g") show("Network: Slow", "red");
    else show("No Internet / Very Slow", "#900");
}

function show(text, color) {
    statusDiv.textContent = text;
    statusDiv.style.background = color;
}

// Browser event â†’ Network changed instantly
navigator.connection.addEventListener("change", updateNetworkStatus);

// Initial call
updateNetworkStatus();
</script>



<div id="splash" class="splash-screengg">
    <h1>Crash</h1>
    <div class="loader-bar">
        <div id="loaderFill" class="loader-fill"></div>
    </div>
    <p id="progressText">0%</p>
</div>


<script>
const loaderFill = document.getElementById('loaderFill');
const progressText = document.getElementById('progressText');
const splash = document.getElementById('splash');


const evtSource = new EventSource('/ping');

evtSource.onmessage = function(e) {
    const progress = parseInt(e.data);
    loaderFill.style.width = progress + '%';
    progressText.textContent = progress + '%';

    if(progress >= 100) {
        splash.classList.add('hidden');
        
        evtSource.close();
    }
}

evtSource.onerror = function() {
    progressText.textContent = "Network Error!";
}
</script>