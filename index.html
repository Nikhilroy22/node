<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Sound Toggle Demo</title>
<style>
body{font-family:sans-serif;background:#0c1726;color:#fff;display:flex;flex-direction:column;align-items:center;padding:40px;}
button{padding:10px 16px;margin:6px;border-radius:6px;border:none;cursor:pointer;background:#7dd3fc;color:#012233;font-weight:600;}
label{margin-right:10px;}
</style>
</head>
<body>

<h2>Gem Slot Sound Demo</h2>

<!-- Sound Toggle Radio -->
<div>
    <label><input type="radio" name="sound" value="on" checked> Sound ON</label>
    <label><input type="radio" name="sound" value="off"> Sound OFF</label>
</div>

<!-- Spin button -->
<button id="spinBtn">Spin</button>

<script>
let soundEnabled = true;

// Web Audio API play function
async function playSound(url){
    if(!soundEnabled) return; // sound off
    try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const resp = await fetch(url);
        const arrayBuffer = await resp.arrayBuffer();
        const audioBuffer = await ctx.decodeAudioData(arrayBuffer);
        const source = ctx.createBufferSource();
        source.buffer = audioBuffer;
        source.connect(ctx.destination);
        source.start(0);
        source.onended = ()=>{ try{ctx.close();}catch(e){} };
        return new Promise(resolve => source.onended = ()=>{ try{ctx.close();}catch(e){} resolve(); });
    } catch(err){
        console.warn('playSound failed', err);
        return Promise.resolve();
    }
}

// Spin button example
document.getElementById('spinBtn').addEventListener('click', ()=>{
    console.log("Spin clicked! Sound enabled:", soundEnabled);
    playSound('spin.mp3'); // এখানে spin sound path বসাও
});

// Radio toggle
const radios = document.querySelectorAll('input[name="sound"]');
radios.forEach(radio=>{
    radio.addEventListener('change', (e)=>{
        soundEnabled = e.target.value === 'on';
        console.log('Sound switched:', soundEnabled ? 'ON':'OFF');
    });
});
</script>

</body>
</html>