<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Crash UI Demo</title>
<style>
  :root{
    --bg:#0f1115;
    --panel:#111217;
    --muted:#9aa0a6;
    --accent:#22c55e;
    --glass: rgba(255,255,255,0.03);
    --card-shadow: 0 8px 30px rgba(2,6,23,0.7);
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  html,body{height:100%;margin:0;background:linear-gradient(180deg,#07080a,#0b0d10);color:#e6eef3}
  .app {
    max-width:420px;
    margin:18px auto;
    padding:14px;
  }

  /* header */
  .top-bar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
    margin-bottom:12px;
  }
  .brand{font-weight:700;color:#ff2e63;font-size:20px;letter-spacing:0.6px}
  .balance {
    background:var(--glass);
    padding:8px 12px;
    border-radius:10px;
    font-weight:600;
    box-shadow: var(--card-shadow);
    color: #bff0b8;
  }

  /* card: multiplier */
  .card{
    background: linear-gradient(180deg,#0b0f14,#081014);
    border-radius:14px;
    padding:12px;
    box-shadow: var(--card-shadow);
    margin-bottom:14px;
    overflow:hidden;
  }

  .mode{
    display:inline-block;
    background:#f6b042;
    color:#231f20;
    padding:6px 12px;
    border-radius:8px;
    font-weight:700;
    margin-bottom:10px;
    font-size:13px;
  }

  .mult-area{
    display:flex;
    align-items:center;
    gap:16px;
    padding:8px 0 0 0;
  }

  .graph {
    width:150px;
    height:110px;
    background:linear-gradient(180deg,#091018,#071018);
    border-radius:10px;
    position:relative;
    box-shadow: inset 0 0 30px rgba(0,0,0,0.6);
    overflow:hidden;
  }

  /* dotted timeline */
  .timeline{
    position:absolute;
    bottom:8px; left:8px; right:8px;
    height:6px;
    display:flex;
    gap:8px;
    justify-content:space-between;
    align-items:center;
  }
  .dot{width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,0.06)}

  /* multiplier text */
  .mult-big{
    flex:1;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
  }
  .mult-value{
    font-size:56px;
    font-weight:800;
    letter-spacing:-1px;
    color: #fff;
    text-shadow: 0 6px 30px rgba(34,197,94,0.12);
  }
  .mult-sub{color:var(--muted); font-size:13px; margin-top:6px}

  /* bottom controls */
  .controls{
    display:flex;
    gap:12px;
    margin-top:12px;
  }
  .bet-panel{
    flex:1;
    background:linear-gradient(180deg,#0e1114,#0b0d10);
    border-radius:10px;
    padding:10px;
    display:flex;
    flex-direction:column;
    gap:8px;
    box-shadow: 0 4px 18px rgba(0,0,0,0.6);
  }

  .amount-row{display:flex; align-items:center; gap:8px; justify-content:space-between}
  .step-btn{
    width:36px;height:36px;border-radius:8px;background:rgba(255,255,255,0.02);
    display:flex;align-items:center;justify-content:center;font-weight:700;border:1px solid rgba(255,255,255,0.03);
    cursor:pointer;
  }
  .amount-input{
    width:120px;background:transparent;border:none;color:#fff;font-size:18px;font-weight:700;text-align:center;
  }

  .preset {display:flex; gap:8px; flex-wrap:wrap}
  .preset button{background:rgba(255,255,255,0.02);border:none;padding:6px 10px;border-radius:8px;color:var(--muted);cursor:pointer}

  .big-bet {
    background: linear-gradient(180deg,#25b75a,#089e46);
    color:white;
    border-radius:12px;
    padding:12px 18px;
    font-weight:800;
    font-size:18px;
    box-shadow: 0 8px 30px rgba(22,163,74,0.18);
    border:none;
    cursor:pointer;
  }

  /* small footer UI */
  .mini{
    margin-top:10px;
    display:flex;
    justify-content:space-between;
    color:var(--muted);
    font-size:13px;
  }

  /* stacked duplicate panels */
  .stack { display:flex; flex-direction:column; gap:12px; }

  /* multiplier progress line animation */
  .curve {
    position:absolute; left:0; bottom:0; width:100%; height:100%;
    pointer-events:none;
  }
  .curve svg { width:100%; height:100%; transform: translateY(8px); }

  /* responsive */
  @media (max-width:420px){
    .mult-value { font-size:46px }
    .graph{width:130px;height:100px}
  }
</style>
</head>
<body>
  <div class="app">
    <div class="top-bar">
      <div class="brand">Aviator</div>
      <div class="balance" id="balance">3,000.00 USD</div>
    </div>

    <!-- Multiplier card -->
    <div class="card">
      <div class="mode">FUN MODE</div>
      <div class="mult-area">
        <div class="graph" aria-hidden="true">
          <div class="curve" id="curve">
            <!-- SVG path will be updated by JS -->
            <svg viewBox="0 0 100 60" preserveAspectRatio="none">
              <path id="path" d="" fill="rgba(255,80,80,0.12)" stroke="rgba(255,80,80,0.6)" stroke-width="0.8" />
            </svg>
          </div>

          <div class="timeline" aria-hidden="true">
            <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
            <div class="dot"></div><div class="dot"></div><div class="dot"></div>
          </div>
        </div>

        <div class="mult-big">
          <div class="mult-value" id="multValue">1.00x</div>
          <div class="mult-sub" id="multSub">Waiting for next round</div>
        </div>
      </div>

      <!-- bottom: controls -->
      <div class="controls">
        <div class="bet-panel">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="color:var(--muted);font-size:13px">Bet</div>
            <div style="color:var(--muted);font-size:13px">Auto</div>
          </div>

          <div class="amount-row">
            <button class="step-btn" id="decBtn">−</button>
            <input id="betAmount" class="amount-input" type="number" step="1" value="100.00" />
            <button class="step-btn" id="incBtn">+</button>
            <button class="big-bet" id="betBtn">BET <span id="betLabel">100.00 BDT</span></button>
          </div>

          <div class="preset">
            <button data-val="10">10</button>
            <button data-val="20">20</button>
            <button data-val="50">50</button>
            <button data-val="100">100</button>
          </div>

          <div class="mini">
            <div id="roundInfo">Round: 0</div>
            <div id="statusInfo">Status: waiting</div>
          </div>
        </div>
      </div>
    </div>

    <!-- stacked second panel to mimic screenshot -->
    <div class="stack">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="color:var(--muted)">Bet</div>
          <div style="color:var(--muted)">Auto</div>
        </div>
        <div style="height:8px"></div>
        <div class="amount-row">
          <button class="step-btn" onclick="decrementAlt()">−</button>
          <input id="betAmount2" class="amount-input" type="number" step="1" value="1.00" />
          <button class="step-btn" onclick="incrementAlt()">+</button>
          <button class="big-bet" onclick="placeAltBet()">BET <span id="betLabel2">1.00 USD</span></button>
        </div>
      </div>
    </div>
  </div>

<script>
/*
  Simple local demo logic:
  - Simulate rounds with multiplier growth and a random crash point.
  - Allow placing bet (reserve) and cashout (not added in this UI).
  - Shows balance update when bet placed (mock: reserve amount).
*/

const balanceEl = document.getElementById('balance');
let userBalance = 3000.00;

const multValueEl = document.getElementById('multValue');
const multSubEl = document.getElementById('multSub');
const betAmountEl = document.getElementById('betAmount');
const betLabel = document.getElementById('betLabel');
const roundInfo = document.getElementById('roundInfo');
const statusInfo = document.getElementById('statusInfo');
const pathEl = document.getElementById('path');

let round = 0;
let state = 'waiting';
let currentMultiplier = 1.00;
let crashPoint = 1.00;
let growthInterval = null;
let pathPoints = [];

// UI helpers
function format(n){ return Number(n).toFixed(2); }
function updateBalance(){ balanceEl.innerText = format(userBalance) + ' USD'; }

updateBalance();
betAmountEl.addEventListener('input', updateBetLabel);
document.getElementById('betAmount2').addEventListener('input', ()=> {
  document.getElementById('betLabel2').innerText = format(document.getElementById('betAmount2').value) + ' USD';
});

function updateBetLabel(){
  let v = parseFloat(betAmountEl.value) || 0;
  betLabel.innerText = format(v) + ' BDT';
}
updateBetLabel();

// step buttons
document.getElementById('incBtn').addEventListener('click', ()=> {
  betAmountEl.value = (parseFloat(betAmountEl.value)||0) + 1;
  updateBetLabel();
});
document.getElementById('decBtn').addEventListener('click', ()=> {
  betAmountEl.value = Math.max(0.01, (parseFloat(betAmountEl.value)||0) - 1);
  updateBetLabel();
});

// preset buttons
document.querySelectorAll('.preset button').forEach(btn=>{
  btn.addEventListener('click', ()=> {
    betAmountEl.value = btn.dataset.val;
    updateBetLabel();
  });
});

// bet action (mock)
document.getElementById('betBtn').addEventListener('click', ()=> {
  const amt = parseFloat(betAmountEl.value) || 0;
  if(amt <= 0){ alert('Invalid bet'); return; }
  if(amt > userBalance){ alert('Not enough balance'); return; }
  // reserve amount
  userBalance -= amt;
  updateBalance();
  // small visual feedback
  flashButton(document.getElementById('betBtn'));
});

// second panel helpers
function incrementAlt(){ 
  const el = document.getElementById('betAmount2');
  el.value = (parseFloat(el.value)||0) + 1;
  document.getElementById('betLabel2').innerText = format(el.value) + ' USD';
}
function decrementAlt(){ 
  const el = document.getElementById('betAmount2');
  el.value = Math.max(0.01,(parseFloat(el.value)||0) - 1);
  document.getElementById('betLabel2').innerText = format(el.value) + ' USD';
}
function placeAltBet(){
  const el = document.getElementById('betAmount2');
  const a = parseFloat(el.value) || 0;
  if(a > userBalance){ alert('Not enough'); return; }
  userBalance -= a; updateBalance();
  flashButton(event ? event.target : null);
}

// small flash animation for bet button
function flashButton(btn){
  if(!btn) return;
  btn.style.transform = 'scale(0.98)';
  setTimeout(()=> btn.style.transform = '', 160);
}

/* --------------------
   Game loop simulation
   -------------------- */
function genCrash(){
  // skewed random: most crashes near 1-3, rare high
  const r = Math.random();
  return Math.max(1.0, Math.round((1 + Math.pow(r, 3) * 30) * 100) / 100);
}

function startWaiting(){
  state='waiting';
  round += 1;
  roundInfo.innerText = 'Round: ' + round;
  statusInfo.innerText = 'Status: waiting';
  multSubEl.innerText = 'Place your bets';
  currentMultiplier = 1.00;
  drawCurveReset();
  setTimeout(()=> startRound(), 3000); // 3s wait
}

function startRound(){
  state='running';
  crashPoint = genCrash();
  statusInfo.innerText = 'Status: running';
  multSubEl.innerText = 'Round running';
  pathPoints = [{x:0,y:1}];
  let t0 = performance.now();
  let speed = 0.6 + Math.random()*0.8; // growth speed tweak
  if(growthInterval) clearInterval(growthInterval);
  growthInterval = setInterval(()=>{
    const t = (performance.now() - t0)/1000;
    // exponential-ish growth
    currentMultiplier = Math.max(1.00, Math.round(Math.exp(speed * t) * 100) / 100);
    multValueEl.innerText = format(currentMultiplier) + 'x';
    // add point for svg path
    const px = Math.min(100, pathPoints.length * 4 + Math.random()*2);
    const py = Math.min(58, Math.log(currentMultiplier+0.1) * 18 + 2);
    pathPoints.push({x:px,y:py});
    renderPath(pathPoints);

    // auto crash
    if(currentMultiplier >= crashPoint){
      clearInterval(growthInterval);
      endRound();
    }
  }, 120);
}

function endRound(){
  state='crashed';
  statusInfo.innerText = 'Status: crashed @ ' + format(crashPoint) + 'x';
  multSubEl.innerText = 'Round crashed';
  multValueEl.innerText = format(crashPoint) + 'x';
  // fill remaining path to right
  renderPath(pathPoints, true);
  // wait then next round
  setTimeout(()=> startWaiting(), 2500);
}

/* SVG path render */
function renderPath(points, finalize=false){
  if(!points || points.length<2) return;
  // normalize to viewBox 0..100 x 0..60 ; we invert y for nicer fill
  const w = 100, h = 60;
  let d = 'M 0 ' + (h - points[0].y);
  for(let i=1;i<points.length;i++){
    const p = points[i];
    d += ` L ${p.x.toFixed(2)} ${Math.max(2, (h - p.y)).toFixed(2)}`;
  }
  // if finalized, close to bottom right then left
  if(finalize){
    d += ` L ${w} ${h} L 0 ${h} Z`;
  } else {
    d += ` L ${points[points.length-1].x.toFixed(2)} ${h} L 0 ${h} Z`;
  }
  pathEl.setAttribute('d', d);
}

/* reset curve */
function drawCurveReset(){
  pathPoints = [{x:0,y:1}];
  renderPath(pathPoints);
  multValueEl.innerText = '1.00x';
}

/* initial start */
drawCurveReset();
setTimeout(()=> startWaiting(), 800);

/* small accessibility: keyboard bet with Enter */
document.addEventListener('keydown', (e)=>{
  if(e.key==='Enter') document.getElementById('betBtn').click();
});
</script>
</body>
</html>