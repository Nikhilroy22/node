<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>Ludo ‡¶ó‡ßá‡¶Æ</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f0f0f0;
            overflow: hidden;
        }
        #game-container {
            width: 100vw;
            height: 100vh;
        }
        button {
            position: absolute;
            z-index: 10;
            font-size: 20px;
            padding: 10px 20px;
        }
        #rollBtn {
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
        }
    </style>
</head>
<body>
    <div id="game-container"></div>
    <button id="rollBtn">Dice Roll üé≤</button>
    <script>
      const config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    backgroundColor: 0xffffff,
    scale: {
        mode: Phaser.Scale.RESIZE,
        autoCenter: Phaser.Scale.CENTER_BOTH
    },
    scene: {
        preload: preload,
        create: create,
        update: update
    },
    parent: 'game-container'
};

const game = new Phaser.Game(config);

let boardSize = 600;
let cellSize = boardSize / 15;
let boardOriginX, boardOriginY;

let players = [];
let currentPlayer = 0;
let diceValue = 0;

let diceSound;
let moveSound;

function preload() {
    // ‡¶≤‡ßÅ‡¶°‡ßã‡¶∞ token ‡¶≤‡ßã‡¶° (‡¶∞‡¶ô)
    this.load.image('red', 'https://i.postimg.cc/0y6h1j8R/red-token.png');
    this.load.image('green', 'https://i.postimg.cc/B6KJfFgV/green-token.png');
    this.load.image('yellow', 'https://i.postimg.cc/3x0hN9qM/yellow-token.png');
    this.load.image('blue', 'https://i.postimg.cc/3JrptQ0b/blue-token.png');

    // ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶≤‡ßã‡¶°
    this.load.audio('dice', 'https://www.soundjay.com/misc/sounds/dice-roll-1.mp3');
    this.load.audio('move', 'https://www.soundjay.com/button/sounds/button-16.mp3');
}

function create() {
    // ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø
    diceSound = this.sound.add('dice');
    moveSound = this.sound.add('move');

    // ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶ï‡ßá‡¶®‡ßç‡¶¶‡ßç‡¶∞
    boardOriginX = this.scale.width / 2 - boardSize / 2;
    boardOriginY = this.scale.height / 2 - boardSize / 2;

    drawBoard(this);

    // ‡¶™‡ßç‡¶≤‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø
    const colors = ['red', 'green', 'yellow', 'blue'];
    colors.forEach((color, i) => {
        let tokens = [];
        for (let j = 0; j < 4; j++) {
            let token = this.add.sprite(boardOriginX + cellSize * 1.5 + j * cellSize, boardOriginY + cellSize * 1.5 + i * cellSize, color)
                .setScale(0.7)
                .setInteractive();
            token.playerIndex = i;
            token.tokenIndex = j;
            tokens.push(token);
        }
        players.push(tokens);
    });

    // Dice Roll Button
    const rollBtn = document.getElementById('rollBtn');
    rollBtn.addEventListener('click', () => {
        diceValue = Phaser.Math.Between(1, 6);
        diceSound.play(); // Dice ‡¶∞‡ßã‡¶≤‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶°
        alert(`Player ${currentPlayer + 1} rolled ${diceValue}`);
        moveToken(players[currentPlayer][0], diceValue);
        currentPlayer = (currentPlayer + 1) % 4;
    });
}

function update() {}

// ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡¶æ
function drawBoard(scene) {
    const graphics = scene.add.graphics();
    graphics.lineStyle(2, 0x000000, 1);

    // ‡¶∏‡ßá‡¶≤ ‡¶°‡ßç‡¶∞
    for (let i = 0; i <= 15; i++) {
        graphics.moveTo(boardOriginX + i * cellSize, boardOriginY);
        graphics.lineTo(boardOriginX + i * cellSize, boardOriginY + boardSize);

        graphics.moveTo(boardOriginX, boardOriginY + i * cellSize);
        graphics.lineTo(boardOriginX + boardSize, boardOriginY + i * cellSize);
    }
    graphics.strokePath();

    // ‡ß™‡¶ü‡¶ø ‡¶¨‡ßá‡¶∏ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞
    graphics.fillStyle(0xff0000, 1); // Red
    graphics.fillRect(boardOriginX, boardOriginY, cellSize*6, cellSize*6);

    graphics.fillStyle(0x00ff00, 1); // Green
    graphics.fillRect(boardOriginX + boardSize - cellSize*6, boardOriginY, cellSize*6, cellSize*6);

    graphics.fillStyle(0xffff00, 1); // Yellow
    graphics.fillRect(boardOriginX, boardOriginY + boardSize - cellSize*6, cellSize*6, cellSize*6);

    graphics.fillStyle(0x0000ff, 1); // Blue
    graphics.fillRect(boardOriginX + boardSize - cellSize*6, boardOriginY + boardSize - cellSize*6, cellSize*6, cellSize*6);
}

// ‡¶∏‡¶ø‡¶Æ‡ßç‡¶™‡¶≤ ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶Æ‡ßÅ‡¶≠
function moveToken(token, steps) {
    moveSound.play(); // ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶Æ‡ßÅ‡¶≠‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶∏‡¶æ‡¶â‡¶®‡ßç‡¶°
    token.x += steps * cellSize;
}
    </script>
</body>
</html>